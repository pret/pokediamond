//==============================================================================
/**
 * @file	we_164.s
 * @brief	みがわり			164
 * @author	goto
 * @date	2005.07.13(水)
 *
 * ここに色々な解説等を書いてもよい
 *
 */
//==============================================================================
	
	.text
	
	.include	"west.h"

	.global		WEST_MIGAWARI
	
// =============================================================================
//
//
//	■みがわり			164
//
//
// =============================================================================
WEST_MIGAWARI:

	SIDE_JP		0, SIDE_MINE, SIDE_ENEMY
	
	SEQEND

SIDE_MINE:

	FUNC_CALL	WEST_SP_WE_SSP_POKE_SCALE_UPDOWN, 8, (WE_TOOL_M1 | WE_TOOL_SSP), 100, 10, 100, 80, 100, 1, (5 << 16) | 5
	
	SE_L		SEQ_SE_DP_061
	WAIT		4
	
	FUNC_CALL	WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 1
	
	WAIT_FLAG
	
	HENSIN_ON	WE_HENSIN_MIGAWARI
	FUNC_CALL	WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 1
	
	WAIT		1
	SE_L		SEQ_SE_DP_080
	
	FUNC_CALL	WEST_SP_WE_T10,	4, 4, 0, -160, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 0
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_T10,	4, 8, 0, +160, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_T10,	4,  4, 0, -32, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_T10,	4,  4, 0, +32, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
	
	SEQEND

SIDE_ENEMY:

	FUNC_CALL	WEST_SP_WE_SSP_POKE_SCALE_UPDOWN, 8, (WE_TOOL_M1 | WE_TOOL_SSP), 100, 10, 100, 80, 100, 1, (5 << 16) | 5
	
	SE_L		SEQ_SE_DP_061
	WAIT		4
	
	FUNC_CALL	WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 1
	
	WAIT_FLAG
	
	HENSIN_ON	WE_HENSIN_MIGAWARI
	FUNC_CALL	WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 1
	
	WAIT		1
	SE_L		SEQ_SE_DP_080
	
	FUNC_CALL	WEST_SP_WE_T10,	4, 4, 0, +80, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 0
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_T10,	4, 8, 0, -80, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_T10,	4,  4, 0, +24, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
	
	FUNC_CALL	WEST_SP_WE_T10,	4,  4, 0, -24, WE_TOOL_M1 | WE_TOOL_SSP
	WAIT_FLAG
		
	SEQEND

/*
	POKEOAM_RES_INIT
	POKEOAM_RES_LOAD	0
	///< 実態
	FUNC_CALL			WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 1
	POKEOAM_DROP		WEDEF_DROP_M1, WEDEF_POKE_AUTO_OFF, WEDEF_POKE_CAP_ID_0, WEDEF_POKE_RES_0,
	WAIT_FLAG
	
	//SE_L				SEQ_SE_DP_W100
	
	FUNC_CALL			WEST_SP_MOSAIC, 4, 0, +1,  0,  0
	WAIT_FLAG
	POKEOAM_DROP_RESET	WEDEF_POKE_CAP_ID_0
	
	///< ポケモンすり替え
	HENSIN_ON			WE_HENSIN_MIGAWARI
	
	///< 変身ポケ
	POKEOAM_RES_LOAD	1
	POKEOAM_DROP		WEDEF_DROP_M1, WEDEF_POKE_AUTO_OFF, WEDEF_POKE_CAP_ID_1, WEDEF_POKE_RES_1,
	
	
	FUNC_CALL			WEST_SP_MOSAIC, 4, 1, -1, 15, 15
	WAIT_FLAG
	
	FUNC_CALL			WEST_SP_WE_SSP_POKE_VANISH, 2, WE_TOOL_M1, 0
	
	POKEOAM_RES_FREE
	POKEOAM_DROP_RESET	WEDEF_POKE_CAP_ID_0
	POKEOAM_DROP_RESET	WEDEF_POKE_CAP_ID_1
*/		
	SEQEND
