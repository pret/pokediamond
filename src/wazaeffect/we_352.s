//==============================================================================
/**
 * @file	we_352.s
 * @brief	みずのはどう			352
 * @author	goto
 * @date	2005.07.13(水)
 *
 * ここに色々な解説等を書いてもよい
 *
 */
//==============================================================================
	
	.text
	
	.include	"west.h"

	.global		WEST_MIZUNOHADOU
	
// =============================================================================
//
//
//	■みずのはどう			352
//
//
// =============================================================================
WEST_MIZUNOHADOU:
	
	LOAD_PARTICLE_DROP	0, W_352_SPA
	LOAD_PARTICLE_DROP	1, W_352_SPA
	
	WORK_CLEAR
	WORK_SET		WEDEF_GP_INDEX_SCREEN_R, 1
	HAIKEI_CHG		BG_ID_352, WEDEF_HAIKEI_MODE_FADE | WEDEF_HAIKEI_SBIT_MOVE
	HAIKEI_HALF_WAIT
	
	FUNC_CALL		WEST_SP_LASTER,		1,		75
	
	HAIKEI_CHG_WAIT
	
	// -----
	
	SEQ_CALL		SEQ_SUB

	SE_REPEAT_C		SEQ_SE_DP_W145C,4,6
	WAIT			5
	
	ADD_PARTICLE_EMIT_SET 	1, 0, W_352_352_RING_BEAM,	EMTFUNC_ATTACK_POS
	FUNC_CALL				WEST_SP_EMIT_STRAIGHT, 6, 0, 0, 0, 0, 12, 64,
	
	WAIT			10
	SE_REPEAT_R		SEQ_SE_DP_W202,2,3
	
	FUNC_CALL		WEST_SP_WT_SHAKE, 5, SHAKE_M_X, 0, SHAKE_M_WAIT, SHAKE_M_NUM,  WE_TOOL_E1 | WE_TOOL_SSP,
	
//	WAIT_FLAG

	WAIT			30

	// -----
	
	WAIT_PARTICLE
	EXIT_PARTICLE	0,
	
	WORK_CLEAR
	WORK_SET		WEDEF_GP_INDEX_SCREEN_R, 1
	HAIKEI_RECOVER	BG_ID_352, WEDEF_HAIKEI_RC_MODE_FADE | WEDEF_HAIKEI_SBIT_STOP
	HAIKEI_CHG_WAIT
	
	SEQEND


///< 泡生成シーケンス
#define BUBPOS_SET(n)	(PT_LCD_PTP_CHG( ((n) * 32) ))
//#define BUBPOS(x,y)		( EX_DATA 4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(x), BUBPOS_SET(y), 0 )
SEQ_SUB:

	///< 0
	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(0), BUBPOS_SET(+1), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(0), BUBPOS_SET(+1), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(2), BUBPOS_SET(0), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(2), BUBPOS_SET(0), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(4), BUBPOS_SET(+1), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(4), BUBPOS_SET(+1), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-2), BUBPOS_SET(0), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-2), BUBPOS_SET(0), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-5), BUBPOS_SET(+1), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-5), BUBPOS_SET(+1), 0

	WAIT			1

	///< -2
	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(0), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(0), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(2), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(2), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(4), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(4), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-2), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-2), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP1,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-5), BUBPOS_SET(-2), 0

	ADD_PARTICLE 	0,W_352_352_BALL_UP2,	EMTFUNC_FIELD_OPERATOR
	EX_DATA			OPERATOR_DEF_DATA_NUM, OPERATOR_PRI_NONE, OPERATOR_TARGET_NONE, OPERATOR_POS_EP_OFS, OPERATOR_AXIS_NONE, OPERATOR_FLD_NONE, OPERATOR_CAMERA_NONE
	EX_DATA			4, OPERATOR_EX_REVERCE_OFF, BUBPOS_SET(-5), BUBPOS_SET(-2), 0

	WAIT			1
	
	END_CALL
