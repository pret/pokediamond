//==============================================================================
/**
 * @file	we_217.s
 * @brief	プレゼント			217
 * @author	goto
 * @date	2005.07.13(水)
 *
 * ここに色々な解説等を書いてもよい
 *
 */
//==============================================================================
	
	.text
	
	.include	"west.h"

	.global		WEST_PUREZENTO
	
// =============================================================================
//
//
//	■プレゼント			217
//
//
// =============================================================================
WEST_PUREZENTO:
	
	LOAD_PARTICLE_DROP	0,W_217_SPA
	ADD_PARTICLE 	0,W_217_217_PRESENT_PRE, 	EMTFUNC_ATTACK_POS
	FUNC_CALL		WEST_SP_EMIT_PARABOLIC, 6, 0, 0, 0, 0, 19, 64,
	
	SE_FLOW_LR		SEQ_SE_DP_W039
	WAIT			20

	TURN_CHK	WEST_TURN_1, WEST_TURN_2

	SEQEND

WEST_TURN_1:

	ADD_PARTICLE 	0,W_217_217_PRESENT_KEMURI, EMTFUNC_DEFENCE_POS
	ADD_PARTICLE 	0,W_217_217_PRESENT_HIT,	EMTFUNC_DEFENCE_POS
	FUNC_CALL		WEST_SP_WT_SHAKE, 5, SHAKE_S_X, 0, SHAKE_S_WAIT, SHAKE_S_NUM,  WE_TOOL_E1 | WE_TOOL_SSP,

	SE_REPEAT_R		SEQ_SE_DP_140,3,3

	WAIT_PARTICLE
	EXIT_PARTICLE	0,
	
	SEQEND

WEST_TURN_2:
	
	LOAD_PARTICLE_DROP	1, SPA_STATUS_EFF
	
	ADD_PARTICLE 	0,W_217_217_PRESENT_KEMURI, EMTFUNC_DEFENCE_POS
	
	POKEOAM_RES_INIT
	POKEOAM_RES_LOAD	WEDEF_POKE_RES_0,
	POKEOAM_RES_LOAD	WEDEF_POKE_RES_1,

	POKEOAM_DROP		WEDEF_DROP_E1, WEDEF_POKE_AUTO_OFF, WEDEF_POKE_CAP_ID_0, WEDEF_POKE_RES_0,
	POKEOAM_DROP		WEDEF_DROP_E1, WEDEF_POKE_AUTO_OFF, WEDEF_POKE_CAP_ID_1, WEDEF_POKE_RES_0,
	POKEOAM_DROP		WEDEF_DROP_E2, WEDEF_POKE_AUTO_OFF, WEDEF_POKE_CAP_ID_2, WEDEF_POKE_RES_1,

	FUNC_CALL	ST_EFF_RECOVER, 2, STEFF_GRA_RECOVER, 1

	SE_R			SEQ_SE_DP_W071B

	WAIT			5
	ADD_PARTICLE 	1, STATUS_EFF_TURN_HEAL, EMTFUNC_DEFENCE_POS

	WAIT_FLAG
	POKEOAM_DROP_RESET	WEDEF_POKE_CAP_ID_0
	POKEOAM_DROP_RESET	WEDEF_POKE_CAP_ID_1
	POKEOAM_DROP_RESET	WEDEF_POKE_CAP_ID_2
	POKEOAM_RES_FREE
		
	WAIT_PARTICLE
	EXIT_PARTICLE	1,

	SEQEND
